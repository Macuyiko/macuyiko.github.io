<!DOCTYPE html>
<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width" />

	<title>Modern Genetic (And Other) Algorithms Explained: Part 6 - Tabu Search</title>

	<link rel="stylesheet" href="http://blog.macuyiko.com/theme/css/normalize.css" />
	<link rel="stylesheet" href="http://blog.macuyiko.com/theme/css/foundation.min.css" />
	<link rel="stylesheet" href="http://blog.macuyiko.com/theme/css/style.css" />
	<link rel="stylesheet" href="http://blog.macuyiko.com/theme/css/pygments.css" />	
	<script src="http://blog.macuyiko.com/theme/js/jquery-2.0.3.min.js"></script>
	<script src="http://blog.macuyiko.com/theme/js/custom.modernizr.js"></script>
	<link href='http://fonts.googleapis.com/css?family=Roboto+Slab:400,700|Open+Sans|Source+Code+Pro:400,500' rel='stylesheet' type='text/css'>
	
	<script type="text/javascript">
	var waitForFinalEvent = (function () {
		var timers = {};
		return function (callback, ms, uniqueId) {
			if (!uniqueId) uniqueId = "_";
			if (timers[uniqueId]) clearTimeout (timers[uniqueId]);
			timers[uniqueId] = setTimeout(callback, ms);
		};
	})();
	var insertCaptions = function() {
		$('#articlecontainer .caption').remove();
		var width = $(window).width();
		var onmobile = width < 960; //>
		var capclass = onmobile ? 'caption-below' : 'caption-aside';
		$.each($('#articlecontainer img'), function(index, value) {
			if ($(value).attr('alt') != undefined) {
				var elem = $('<div class="caption '+capclass+'">'+$(value).attr('alt')+'</div>');
				if (onmobile) elem.insertAfter(value);
				else elem.insertBefore(value);
			}
		});
	};
	$(function() {
		$(window).resize(function () {
			waitForFinalEvent(function(){
				insertCaptions();
			}, 500, "window.resize");
		});
		insertCaptions();
	});
	</script>
	<script type="text/javascript">
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-60406-11']);
		_gaq.push(['_trackPageview']);

		(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();
	</script>
</head>

<body>

<nav>
	<div class="top-bar large-12 columns">
		<h1><a href="http://blog.macuyiko.com/">Bed Against The Wall</a></h1>
	</div>
</nav>


<div class="row contentwrapper">
	<div class="row">
<div id="articlecontainer" class="large-9 columns large-centered">
	<article>
		<header>
			<div class="article-info">do 29 januari 2009, by Seppe "Macuyiko" vanden Broucke</div>
			<div class="article-title"><a href="http://blog.macuyiko.com/post/2009/modern-genetic-and-other-algorithms-explained-part-6-tabu-search.html" rel="bookmark"
			title="Permalink to Modern Genetic (And Other) Algorithms Explained: Part 6 - Tabu Search">Modern Genetic (And Other) Algorithms Explained: Part 6 - Tabu&nbsp;Search</a></div>
		</header>
	
	    <p>(This is part 6 in the Modern Genetic Algorithms Explained series, click <a href="http://blog.macuyiko.com/post/2009/modern-genetic-and-other-algorithms-explained-part-1-introduction.html">here</a> to go to the first post, or browse through all the parts with the Table Of Contents at the end of this&nbsp;post.)  </p>
<p><a href="http://en.wikipedia.org/wiki/Tabu_search">Tabu search</a> is not really &#8220;modern&#8221; anymore, but still widely used nonetheless.<br />
The pseudocode looks like&nbsp;this:  </p>
<div class="highlight"><pre>Construct an initial solution  
Until timelimit hit or satisfying solution found do:  
    Find all neighbours which are not in the tabu list, and calculate their score  
    Pick the best neighbour, add the previous solution to the tabu list`
</pre></div>


<p>Notice that the &#8220;best neighbour&#8221; must not necessarily be better than the current solution, or than the ever best found solution.<br />
Maintaining a tabu list can be time and memory consuming, alternatively we could construct a list like this: add the difference between two following solutions to the list (so that they cannot be undone), and keep it in the list for n iterations. N, or the length of the list is important: make it too long and the algorithm might get stuck, make it too short and the algorithm will tend towards local maxima.<br />
This time, I&#8217;ve coded the example in <span class="caps">PHP</span>, I hope nobody&nbsp;minds:  </p>
<div class="highlight"><pre><span class="o">&lt;</span><span class="p">?</span><span class="n">php</span>
<span class="nv">$target</span> <span class="o">=</span> <span class="mi">300</span><span class="p">;</span>  
<span class="sr">//co</span><span class="n">nstruct</span> <span class="n">an</span> <span class="n">initial</span> <span class="n">solution</span>  
<span class="nv">$tabulist</span> <span class="o">=</span> <span class="n">array</span><span class="p">(</span><span class="s">&#39;ttl&#39;</span> <span class="o">=&gt;</span> <span class="n">array</span><span class="p">(),</span> <span class="s">&#39;change&#39;</span> <span class="o">=&gt;</span> <span class="n">array</span><span class="p">());</span>  
<span class="nv">$solution</span> <span class="o">=</span> <span class="n">array</span><span class="p">();</span>

<span class="nv">$min</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>  
<span class="nv">$max</span> <span class="o">=</span> <span class="mi">100</span><span class="p">;</span>  
<span class="k">for</span> <span class="p">(</span><span class="nv">$i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nv">$i</span><span class="o">&lt;</span><span class="mi">6</span><span class="p">;</span><span class="nv">$i</span><span class="o">++</span><span class="p">)</span>  
    <span class="nv">$solution</span><span class="o">[]</span> <span class="o">=</span> <span class="nb">rand</span><span class="p">(</span><span class="nv">$min</span><span class="p">,</span><span class="nv">$max</span><span class="p">);</span>  
<span class="sr">//</span><span class="k">until</span> <span class="n">solution</span> <span class="n">found</span>  
<span class="k">while</span> <span class="p">(</span><span class="n">true</span><span class="p">){</span>  
    <span class="nv">$best_neighbour_solution</span> <span class="o">=</span> <span class="n">false</span><span class="p">;</span>  
    <span class="nv">$best_neighbour_score</span> <span class="o">=</span> <span class="mi">1000</span><span class="p">;</span>  
    <span class="nv">$best_neighbour_tabu</span> <span class="o">=</span> <span class="n">false</span><span class="p">;</span>  
    <span class="k">for</span> <span class="p">(</span><span class="nv">$position</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nv">$position</span><span class="o">&lt;</span><span class="mi">6</span><span class="p">;</span><span class="nv">$position</span><span class="o">++</span><span class="p">){</span>  
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">in_array</span><span class="p">(</span><span class="s">&quot;$position+&quot;</span><span class="p">,</span><span class="nv">$tabulist</span><span class="p">[</span><span class="s">&#39;change&#39;</span><span class="p">])</span>  
                <span class="ow">and</span> <span class="nv">$solution</span><span class="p">[</span><span class="nv">$position</span><span class="p">]</span> <span class="o">&lt;</span> <span class="nv">$max</span><span class="p">){</span>  
            <span class="nv">$temp_solution</span> <span class="o">=</span> <span class="nv">$solution</span><span class="p">;</span>  
            <span class="nv">$temp_solution</span><span class="p">[</span><span class="nv">$position</span><span class="p">]</span><span class="o">++</span><span class="p">;</span>  
            <span class="nv">$score</span> <span class="o">=</span> <span class="n">fitness</span><span class="p">(</span><span class="nv">$temp_solution</span><span class="p">,</span><span class="nv">$target</span><span class="p">);</span>  
            <span class="k">if</span> <span class="p">(</span><span class="nv">$score</span> <span class="o">&lt;</span> <span class="nv">$best_neighbour_score</span><span class="p">){</span>  
                <span class="nv">$best_neighbour_score</span> <span class="o">=</span> <span class="nv">$score</span><span class="p">;</span>  
                <span class="nv">$best_neighbour_solution</span> <span class="o">=</span> <span class="nv">$temp_solution</span><span class="p">;</span>  
                <span class="sr">//m</span><span class="n">ake</span> <span class="n">sure</span> <span class="n">this</span> <span class="n">step</span> <span class="n">doesn</span><span class="s">&#39;t get undone  </span>
<span class="s">                $best_neighbour_tabu = &quot;$position-&quot;;  </span>
<span class="s">            }  </span>
<span class="s">        }  </span>
<span class="s">        if(!in_array(&quot;$position-&quot;,$tabulist[&#39;</span><span class="n">change</span><span class="s">&#39;])  </span>
<span class="s">                and $solution[$position] &gt; $min){  </span>
<span class="s">            $temp_solution = $solution;  </span>
<span class="s">            $temp_solution[$position]--;  </span>
<span class="s">            $score = fitness($temp_solution,$target);  </span>
<span class="s">            if ($score &lt; $best_neighbour_score){  </span>
<span class="s">                $best_neighbour_score = $score;  </span>
<span class="s">                $best_neighbour_solution = $temp_solution;  </span>
<span class="s">                //make sure this step doesn&#39;</span><span class="n">t</span> <span class="n">get</span> <span class="n">undone</span>  
                <span class="nv">$best_neighbour_tabu</span> <span class="o">=</span> <span class="s">&quot;$position+&quot;</span><span class="p">;</span>  
            <span class="p">}</span>  
        <span class="p">}</span>  
    <span class="p">}</span>  
    <span class="sr">//</span><span class="n">pick</span> <span class="n">the</span> <span class="n">best</span> <span class="n">neighbour</span>  
    <span class="nv">$solution</span> <span class="o">=</span> <span class="nv">$best_neighbour_solution</span><span class="p">;</span>  
    <span class="nv">$fitness</span> <span class="o">=</span> <span class="n">fitness</span><span class="p">(</span><span class="nv">$solution</span><span class="p">,</span><span class="nv">$target</span><span class="p">);</span>  
    <span class="n">echo</span> <span class="s">&quot;Iteration $iterations: fitness = $fitness\n&quot;</span><span class="p">;</span>  
    <span class="k">if</span> <span class="p">(</span><span class="nv">$fitness</span> <span class="o">==</span> <span class="mi">0</span><span class="p">){</span>  
        <span class="n">echo</span> <span class="s">&quot;Perfect solution found:\n&quot;</span><span class="p">;</span>  
        <span class="n">print_r</span><span class="p">(</span><span class="nv">$solution</span><span class="p">);</span>  
        <span class="nb">die</span><span class="p">;</span>  
    <span class="p">}</span>  
    <span class="sr">//</span><span class="n">add</span> <span class="n">change</span> <span class="n">to</span> <span class="n">tabu</span> <span class="n">list</span>  
    <span class="nv">$tabulist</span><span class="p">[</span><span class="s">&#39;ttl&#39;</span><span class="p">][</span><span class="nv">$iterations</span><span class="p">]</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span> <span class="sr">//</span><span class="n">remember</span> <span class="k">for</span> <span class="mi">5</span> <span class="n">iteration</span>  
    <span class="nv">$tabulist</span><span class="p">[</span><span class="s">&#39;change&#39;</span><span class="p">][</span><span class="nv">$iterations</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$best_neighbour_tabu</span><span class="p">;</span>  
    <span class="sr">//</span><span class="n">update</span> <span class="n">the</span> <span class="n">tabulist</span>  
    <span class="k">foreach</span> <span class="p">(</span><span class="nv">$tabulist</span><span class="p">[</span><span class="s">&#39;ttl&#39;</span><span class="p">]</span> <span class="n">as</span> <span class="nv">$key</span> <span class="o">=&gt;</span> <span class="o">&amp;</span><span class="nv">$val</span><span class="p">){</span>  
        <span class="nv">$val</span><span class="o">--</span><span class="p">;</span>  
        <span class="k">if</span> <span class="p">(</span><span class="nv">$val</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">){</span>  
            <span class="n">unset</span><span class="p">(</span><span class="nv">$tabulist</span><span class="p">[</span><span class="s">&#39;ttl&#39;</span><span class="p">][</span><span class="nv">$key</span><span class="p">]);</span>  
            <span class="n">unset</span><span class="p">(</span><span class="nv">$tabulist</span><span class="p">[</span><span class="s">&#39;change&#39;</span><span class="p">][</span><span class="nv">$key</span><span class="p">]);</span>  
        <span class="p">}</span>  
    <span class="p">}</span>  
    <span class="n">echo</span> <span class="s">&quot;Iteration $iterations: tabulist now contains &quot;</span>  
        <span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="nv">$tabulist</span><span class="p">[</span><span class="s">&#39;ttl&#39;</span><span class="p">])</span><span class="o">.</span><span class="s">&quot; items \n&quot;</span><span class="p">;</span>  
    <span class="nv">$iterations</span><span class="o">++</span><span class="p">;</span>  
<span class="p">}</span>  
<span class="n">function</span> <span class="n">fitness</span><span class="p">(</span><span class="nv">$array</span><span class="p">,</span> <span class="nv">$target</span><span class="p">){</span>  
    <span class="k">return</span> <span class="nb">abs</span><span class="p">(</span><span class="n">array_sum</span><span class="p">(</span><span class="nv">$array</span><span class="p">)</span><span class="o">-</span><span class="nv">$target</span><span class="p">);</span>  
<span class="p">}</span>
</pre></div>


<p>The neighbour calculation could be done a little better (there&#8217;s a bit of ugly duplicate code), but the following output is given:<br />
    Iteration : fitness = 57<br />
    Iteration : tabulist now contains 1 items<br />
    Iteration 1: fitness = 56<br />
    Iteration 1: tabulist now contains 2 items<br />
    Iteration 2: fitness = 55<br />
    Iteration 2: tabulist now contains 3 items<br />
    Iteration 3: fitness = 54<br />
    Iteration 3: tabulist now contains 4 items<br />
    Iteration 4: fitness = 53<br />
    Iteration 4: tabulist now contains 4 items<br />
    Iteration 5: fitness = 52<br />
    Iteration 5: tabulist now contains 4 items<br />
    &#8230;<br />
    Iteration 55: tabulist now contains 4 items<br />
    Iteration 56: fitness = 1<br />
    Iteration 56: tabulist now contains 4 items<br />
    Iteration 57: fitness = 0<br />
    Perfect solution found:<br />
    Array<br />
    (<br />
        [0] =&gt; 66<br />
        [1] =&gt; 14<br />
        [2] =&gt; 20<br />
        [3] =&gt; 99<br />
        [4] =&gt; 14<br />
        [5] =&gt; 87<br />&nbsp;)  </p>
<p>With this sample problem, such an output was, of course, expected. Notice that I&#8217;ve used the second method of keeping a tabulist.<br />
This post concludes this series, we only have one post to go, with a general&nbsp;conclusion.  </p>
<hr />
<p>Table Of Contents (click a link to jump to that&nbsp;post)</p>
<ol>
<li><a href="http://blog.macuyiko.com/post/2009/modern-genetic-and-other-algorithms-explained-part-1-introduction.html">Introduction</a>
2. <a href="http://blog.macuyiko.com/post/2009/modern-genetic-and-other-algorithms-explained-part-2-genetic-algorithms.html">Genetic Algorithms</a>
3. <a href="http://blog.macuyiko.com/post/2009/modern-genetic-and-other-algorithms-explained-part-3-chc-eshelman.html"><span class="caps">CHC</span> Eshelman</a>
4. <a href="http://blog.macuyiko.com/post/2009/modern-genetic-and-other-algorithms-explained-part-4-simulated-annealing.html">Simulated Annealing</a>
5. <a href="http://blog.macuyiko.com/post/2009/modern-genetic-and-other-algorithms-explained-part-5-ant-colony-optimization.html">Ant Colony Optimization</a> 
6. <a href="http://blog.macuyiko.com/post/2009/modern-genetic-and-other-algorithms-explained-part-6-tabu-search.html">Tabu&nbsp;Search</a></li>
<li><a href="http://blog.macuyiko.com/post/2009/modern-genetic-and-other-algorithms-explained-part-7-conclusion.html">Conclusion</a> </li>
</ol>
	</article>

		<hr  class="gradient"/>
<div class="article-comments">Care to Comment?</div>

<!--
<div>
<ul id="commenttabs" style="clear: both;">
    <li class="active"><a href="#googleplus">Google+</a></li>
    <li><a href="#facebook">Facebook</a></li>
    <li><a href="#disqus">Disqus</a></li>
</ul>
</div>

<div style="clear: both;"> </div>

<div class="commenttab" id="googleplus">
	<div class="g-comments" data-href="http://blog.macuyiko.com/post/2009/modern-genetic-and-other-algorithms-explained-part-6-tabu-search.html" data-first_party_property="BLOGGER" data-view_type="FILTERED_POSTMOD">Loading Google+ comments...</div>
</div>

<div class="commenttab" id="facebook">
	<div id="fb-root"><div class="fb-comments" data-href="http://blog.macuyiko.com/post/2009/modern-genetic-and-other-algorithms-explained-part-6-tabu-search.html" data-num-posts="20" data-colorscheme="light" data-mobile="auto"></div></div>
</div>
-->

<div class="commenttab" id="disqus">
	<div id="disqus_thread"></div>
		<script type="text/javascript">
	    var disqus_shortname = 'macuyiko';
	    var disqus_identifier = 'post/2009/modern-genetic-and-other-algorithms-explained-part-6-tabu-search.html';
	    var disqus_title = 'Modern Genetic (And Other) Algorithms Explained: Part 6 - Tabu Search';
	    var disqus_url = 'http://blog.macuyiko.com/post/2009/modern-genetic-and-other-algorithms-explained-part-6-tabu-search.html';

	    (function() {
	        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
	        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
	        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	    })();
	</script>
</div></div>
		
	</div>

	<footer class="row">
		<div class="large-12 columns">
			<hr />
			<div class="row">
				<p>Bed Against The Wall by Seppe "Macuyiko" vanden Broucke</p>
				<p><a href="http://creativecommons.org/licenses/by-sa/2.0/be/" rel="license"><img title="Creative Commons License" src="http://i.creativecommons.org/l/by-sa/2.0/be/88x31.png" /></a><br />
				Unless mentioned otherwise, this work is licensed under a <a href="http://creativecommons.org/licenses/by-sa/2.0/be/" rel="license">Creative Commons Attribution-Share Alike 2.0 Belgium License</a>.</p>
				<p>Static blog engine powered by <a href="http://getpelican.com">Pelican</a>.</p>
			</div>
		</div>
	</footer>
</div>
 